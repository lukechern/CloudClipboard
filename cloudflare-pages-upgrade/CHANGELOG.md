# 更新日志

## v2.3.0 - 安全增强版本

### 🛡️ 安全改进
- **JWT认证系统**: 实现基于JWT的安全认证，替代不安全的Base64编码
- **HttpOnly Cookie存储**: JWT token安全存储在HttpOnly Cookie中，防止XSS攻击
- **CSRF保护**: 完整的跨站请求伪造防护机制
- **双重认证**: Cookie + CSRF Token双重验证，提供企业级安全防护
- **速率限制**: 防止暴力破解攻击，支持IP级别限制和自动封锁
- **SameSite Cookie**: 额外的CSRF防护层

### 🔧 技术升级
- **认证流程优化**: 智能认证模式切换，支持Cookie和Header双重模式
- **安全注销功能**: 完整的会话清理机制
- **增强错误处理**: 智能错误提示和倒计时功能
- **向后兼容**: 支持现有客户端无缝升级

### 📋 配置变更
- 新增必需环境变量: `JWT_SECRET`
- 新增可选环境变量: `CSRF_SECRET`, `RATE_LIMIT_KV`
- 更新部署文档，包含完整安全配置指南

## v2.1.0 - 简化版本

### 🗑️ 移除功能
- **iframe支持**: 移除了所有iframe环境的特殊处理代码
- **父窗口通信**: 删除了postMessage相关的通信机制
- **手动剪贴板按钮**: 移除了复杂的手动读取剪贴板按钮
- **复杂错误处理**: 简化了剪贴板读取的错误处理逻辑

### ✨ 保留功能
- **基础剪贴板读取**: 在HTTPS环境下自动读取系统剪贴板
- **清空按钮**: 文本框右下角的小刷子清空图标
- **密码保护**: 可选的访问密码验证功能
- **历史记录管理**: 完整的记录查看、复制、删除功能
- **批量操作**: 支持批量选择和删除记录
- **响应式设计**: 完美适配桌面端和移动端

### 🎯 简化原因
- 减少代码复杂度，提高维护性
- 专注核心功能，避免过度工程化
- 提升性能，减少不必要的功能检测
- 简化用户体验，避免混乱的UI元素

### 📋 剪贴板功能说明
现在的剪贴板功能非常简单：
- 页面加载时自动尝试读取剪贴板（仅HTTPS环境）
- 成功时自动填入文本框并显示提示
- 失败时静默处理，不显示任何额外UI
- 用户可以随时使用 Ctrl+V 手动粘贴

### 🔧 技术改进
- 移除了约200行iframe相关代码
- 删除了复杂的CSS样式定义
- 简化了事件监听器和状态管理
- 提升了整体代码可读性

## v2.0.0 - Cloudflare Pages版本

### 🎉 新功能
- 迁移到Cloudflare Pages + Workers架构
- 添加密码保护功能
- 实现智能清空按钮
- 支持全球CDN加速

### 🔄 架构升级
- 从PHP后端迁移到Cloudflare Workers
- 静态资源部署到Cloudflare Pages
- 继续使用Cloudflare D1数据库
- 实现前后端分离

## v1.0.0 - PHP版本

### 📝 基础功能
- 文本内容保存和管理
- 历史记录查看
- 复制到剪贴板
- 数据库初始化
- 基础的响应式设计